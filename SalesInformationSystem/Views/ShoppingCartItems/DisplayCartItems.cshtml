@model IEnumerable<SalesInformationSystem.Models.CartItems>

@{
	ViewData["Title"] = "DisplayCartItems";
}

<h1>your Items in the cart</h1>

<table class="table">
	<thead>
		<tr>
			<th>@Html.DisplayNameFor(model => model.ItemId)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Quantity)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.DataCreated)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Product.ProductPrice)
			</th>
			<th>
				Total Amount
			</th>
		</tr>
		<th>
			Delete
		</th>
	</thead>
	<tbody>
		@{
			var OverallTotal = 0.0;
		}
		@foreach (var item in Model)
		{
			<tr>
				<td>
					@Html.DisplayNameFor(modelitem => item.ItemId)
				</td>
				<td>
					@Html.DisplayNameFor(modelitem => item.Quantity)
				</td>
				<td>
					@Html.DisplayNameFor(modelitem => item.DataCreated)
				</td>
				<td>
					@Html.DisplayNameFor(modelitem => item.Price)
				</td>
				<td>
					@{
						var tamount = item.Quantity = item.Price;
						OverallTotal = OverallTotal + tamount;		
					}
					@tamount.ToString("C2")
				</td>
			</tr>
			<td>
				<a class="btn btn-nd btn-danger" asp-controller="ShoppingCartItems" asp-action="DeleteCartItem" asp-route-id="@item.CartPk">Delete</a>
			</td>
		}
	</tbody>
	</table>
	<br />
	<br />
	<h1>The total amount of orders is:@OverallTotal.ToString("C2")</h1>